deep dive into nested loops and functions